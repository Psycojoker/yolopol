-# List representatives

- extends 'base.html'

- load humanize
- load representatives_tags
- load representatives_votes_tags
- load representatives_recommendations_tags
- load bootstrap3

- block head
  {{ position_form.media }}

- block content
  .row
    .col-md-6
      - include 'representatives/_representative_block.html' with representative=representative
    .col-md-6
      %h2#votes Votes

      %table.table.table-condensed.votes
        %tr
          %th Title
          %th.icon-cell
            Memopol recommendation
          %th.icon-cell
            Representative vote
          %th.icon-cell
            Score

        - for vote in votes
          %tr
            %td= vote.proposal.recommendation.title
            %td.icon-cell
              = vote.proposal.recommendation.recommendation|position_icon
            %td.icon-cell
              = vote.position|position_icon
            %td.icon-cell
              = vote.proposal.recommendation.weight|score_label


  %h2 Mandates

  %table.table.table-condensed.mandates
    - for mandate in mandates
      %tr.mandate
        %td= mandate.role
        %td
          %a{:href => "{{ mandate.group.get_absolute_url }}"}
            {{ mandate.group.name }}
            - if mandate.group.abbreviation
              {{ mandate.group.abbreviation }}
        %td= mandate.begin_date|mandate_date:'d/m/Y'
        %td= mandate.end_date|mandate_date:'d/m/Y'
        %td= mandate.constituency.name

  .positions
    %h2 Public positions

    %table.table.table-condensed
      - for position in positions
        %tr.position
          %td= position.datetime|naturalday:'d/m/Y'
          %td
            %a{:href => '{{ position.get_absolute_url }}'}
              =position.text|truncatewords:8
          %td
            - for tag in position.tags.all
              %span.label.label-default
                = tag
          %td
            %a{:href => '{{position.link}}'}
              = position.link

    %form{:action => '{% url "representatives_positions:position-create" %}',
          :method => 'post'}
      - csrf_token
      %input{:type => 'hidden',
             :name => 'representative',
             :value => '{{ representative.pk }}'}

      - bootstrap_form position_form

      - buttons
        %button{'type': 'submit', 'class': 'btn btn-primary'}
          {% bootstrap_icon "star" %} Submit
      - endbuttons
